2022-05-02T01:57:45.706Z	V4	e2e	Logger init completed	{"vlevel": 4}
=== RUN   TestVSphereKubernetes122BottlerocketAutoimport
2022-05-02T01:57:45.706Z	V2	e2e	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:57:54.327Z	V3	e2e	Initializing long running container	{"name": "eksa_1651456665706435704", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:57:59.105Z	V2	e2e	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:58:00.073Z	V3	e2e	Initializing long running container	{"name": "eksa_1651456679105331941", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
    cluster.go:499: Running shell command [ eksctl anywhere generate clusterconfig main-i-05dc226d19d9ee942 -p vsphere > cluster.yaml ]
    cluster.go:374: Creating cluster main-i-05dc226d19d9ee942
    cluster.go:499: Running shell command [ eksctl anywhere create cluster -f main-i-05dc226d19d9ee942-config/cluster.yaml -v 4 ]
2022-05-02T01:58:04.563Z	V4	Logger init completed	{"vlevel": 4}
2022-05-02T01:58:04.678Z	V0	Warning: VSphereDatacenterConfig configured in insecure mode
2022-05-02T01:58:04.721Z	V4	Reading bundles manifest	{"url": "https://dev-release-prod-pdx.s3.amazonaws.com/bundle-release.yaml"}
2022-05-02T01:58:04.818Z	V2	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.7.2-eks-a-v0.0.0-dev-build.1872"}
2022-05-02T01:58:10.961Z	V3	Initializing long running container	{"name": "eksa_1651456684818480861", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.7.2-eks-a-v0.0.0-dev-build.1872"}
2022-05-02T01:58:14.092Z	V4	Task start	{"task_name": "setup-validate"}
2022-05-02T01:58:14.092Z	V0	Performing setup and validations
2022-05-02T01:58:14.092Z	V0	Warning: VSphereDatacenterConfig configured in insecure mode
2022-05-02T01:58:14.117Z	V0	✅ Connected to server
2022-05-02T01:58:14.430Z	V0	✅ Authenticated to vSphere
2022-05-02T01:58:14.784Z	V0	✅ Datacenter validated
2022-05-02T01:58:15.102Z	V0	✅ Network validated
2022-05-02T01:58:15.102Z	V1	Control plane VSphereMachineConfig template is not set. Using default template.
2022-05-02T01:58:15.446Z	V2	Template not found: /SDDC-Datacenter/vm/Templates/bottlerocket-v1.22.6-kubernetes-1-22-eks-6-amd64-2e37b66
2022-05-02T01:58:15.446Z	V2	Template not available. Creating	{"template": "/SDDC-Datacenter/vm/Templates/bottlerocket-v1.22.6-kubernetes-1-22-eks-6-amd64-2e37b66"}
2022-05-02T01:58:15.785Z	V0	Creating template. This might take a while.
2022-05-02T01:58:17.068Z	V2	Importing template from ova url	{"ova": "https://dev-release-prod-pdx.s3.amazonaws.com/artifacts/v0.0.0-dev-build.2544/eks-distro/ova/1-22/1-22-6/bottlerocket-v1.22.6-eks-d-1-22-6-eks-a-v0.0.0-dev-build.2544-amd64.ova"}
2022-05-02T01:58:17.068Z	V4	Importing template	{"ova": "https://dev-release-prod-pdx.s3.amazonaws.com/artifacts/v0.0.0-dev-build.2544/eks-distro/ova/1-22/1-22-6/bottlerocket-v1.22.6-eks-d-1-22-6-eks-a-v0.0.0-dev-build.2544-amd64.ova", "templateName": "bottlerocket-v1.22.6-kubernetes-1-22-eks-6-amd64-2e37b66"}
2022-05-02T01:58:34.744Z	V0	❌ Validation failed	{"validation": "vsphere Provider setup is valid", "error": "failed setting default values for vsphere machine configs: failed importing template into library: importing template: govc: The import of library item a4d1e8d3-c552-477a-9c64-a29c48ae21ca has failed. Reason: Error transferring file bottlerocket-v1.22.6-eks-d-1-22-6-eks-a-v0.0.0-dev-build.2544-amd64.ova to ds:///vmfs/volumes/vsan:d553112fa66a4375-b38364b4fc9cf307//contentlib-90101bba-18c7-40c9-9ec6-4ab31d1928d8/a4d1e8d3-c552-477a-9c64-a29c48ae21ca/bottlerocket-v1.22.6-eks-d-1-22-6-eks-a-v0.0.0-dev-build.2544-amd64_8fc278da-897f-4454-ba08-98313b011af6.ova?serverId=65cc6f41-4935-4140-b6c5-fa6370cad77d. Reason: Error during transfer of ds:///vmfs/volumes/vsan:d553112fa66a4375-b38364b4fc9cf307//contentlib-90101bba-18c7-40c9-9ec6-4ab31d1928d8/a4d1e8d3-c552-477a-9c64-a29c48ae21ca/bottlerocket-v1.22.6-eks-d-1-22-6-eks-a-v0.0.0-dev-build.2544-amd64_8fc278da-897f-4454-ba08-98313b011af6.ova?serverId=65cc6f41-4935-4140-b6c5-fa6370cad77d: IO error during transfer of ds:/vmfs/volumes/vsan:d553112fa66a4375-b38364b4fc9cf307/contentlib-90101bba-18c7-40c9-9ec6-4ab31d1928d8/a4d1e8d3-c552-477a-9c64-a29c48ae21ca/bottlerocket-vmware-k8s-1.22-x86_64-1.7.2-28782dce_8fc278da-897f-4454-ba08-98313b011af6.vmdk: Pipe closed.\n", "remediation": ""}
2022-05-02T01:58:34.744Z	V0	✅ Validate certificate for registry mirror
2022-05-02T01:58:34.744Z	V0	✅ Create preflight validations pass
2022-05-02T01:58:34.744Z	V4	Task finished	{"task_name": "setup-validate", "duration": "20.652087943s"}
2022-05-02T01:58:34.744Z	V4	----------------------------------
2022-05-02T01:58:34.744Z	V4	Tasks completed	{"duration": "20.652146464s"}
2022-05-02T01:58:34.744Z	V3	Logging out from current govc session
2022-05-02T01:58:35.359Z	V3	Cleaning up long running container	{"name": "eksa_1651456684818480861"}
Error: validations failed
    cluster.go:532: Command eksctl anywhere [create cluster -f main-i-05dc226d19d9ee942-config/cluster.yaml -v 4] failed with error: exit status 255: Error: validations failed
2022-05-02T01:58:35.481Z	V3	e2e	Cleaning up long running container	{"name": "eksa_1651456679105331941"}
2022-05-02T01:58:35.572Z	V3	e2e	Logging out from current govc session
2022-05-02T01:58:36.223Z	V3	e2e	Cleaning up long running container	{"name": "eksa_1651456665706435704"}
--- FAIL: TestVSphereKubernetes122BottlerocketAutoimport (50.61s)
FAIL

DONE 1 tests, 1 failure in 50.770s