2022-05-02T01:57:45.912Z	V4	e2e	Logger init completed	{"vlevel": 4}
=== RUN   TestVSphereKubernetes122LabelsBottlerocket
2022-05-02T01:57:45.913Z	V2	e2e	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:57:55.331Z	V3	e2e	Initializing long running container	{"name": "eksa_1651456665913233840", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:58:00.297Z	V2	e2e	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
2022-05-02T01:58:01.282Z	V3	e2e	Initializing long running container	{"name": "eksa_1651456680297406448", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.1.0-eks-a-v0.0.0-dev-build.589"}
    cluster.go:499: Running shell command [ eksctl anywhere generate clusterconfig main-i-080d248ab9f2e588b -p vsphere > cluster.yaml ]
2022-05-02T01:58:06.053Z	V0	e2e	Adding worker node group	{"name": "worker-0"}
2022-05-02T01:58:06.054Z	V0	e2e	Adding worker node group	{"name": "worker-1"}
2022-05-02T01:58:06.054Z	V0	e2e	Adding worker node group	{"name": "worker-2"}
    cluster.go:374: Creating cluster main-i-080d248ab9f2e588b
    cluster.go:499: Running shell command [ eksctl anywhere create cluster -f main-i-080d248ab9f2e588b-config/cluster.yaml -v 4 ]
2022-05-02T01:58:06.155Z	V4	Logger init completed	{"vlevel": 4}
2022-05-02T01:58:06.158Z	V0	Warning: The recommended size of an external etcd cluster is 3 or 5
2022-05-02T01:58:06.328Z	V0	Warning: VSphereDatacenterConfig configured in insecure mode
2022-05-02T01:58:06.378Z	V4	Reading bundles manifest	{"url": "https://dev-release-prod-pdx.s3.amazonaws.com/bundle-release.yaml"}
2022-05-02T01:58:06.473Z	V2	Pulling docker image	{"image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.7.2-eks-a-v0.0.0-dev-build.1872"}
2022-05-02T01:58:12.984Z	V3	Initializing long running container	{"name": "eksa_1651456686473964326", "image": "public.ecr.aws/l0g8r8j6/eks-anywhere-cli-tools:v0.7.2-eks-a-v0.0.0-dev-build.1872"}
2022-05-02T01:58:16.181Z	V4	Task start	{"task_name": "setup-validate"}
2022-05-02T01:58:16.181Z	V0	Performing setup and validations
2022-05-02T01:58:16.181Z	V0	Warning: VSphereDatacenterConfig configured in insecure mode
2022-05-02T01:58:16.207Z	V0	✅ Connected to server
2022-05-02T01:58:16.582Z	V0	✅ Authenticated to vSphere
2022-05-02T01:58:17.023Z	V0	✅ Datacenter validated
2022-05-02T01:58:17.405Z	V0	✅ Network validated
2022-05-02T01:58:18.125Z	V1	SSHUsername is not set or is empty for VSphereMachineConfig, using default	{"machineConfig": "worker-0", "user": "ec2-user"}
2022-05-02T01:58:19.029Z	V1	SSHUsername is not set or is empty for VSphereMachineConfig, using default	{"machineConfig": "worker-1", "user": "ec2-user"}
2022-05-02T01:58:19.900Z	V1	SSHUsername is not set or is empty for VSphereMachineConfig, using default	{"machineConfig": "worker-2", "user": "ec2-user"}
2022-05-02T01:58:21.835Z	V0	✅ Datastore validated
2022-05-02T01:58:22.215Z	V0	✅ Folder validated
2022-05-02T01:58:22.595Z	V0	✅ Resource pool validated
2022-05-02T01:58:22.930Z	V0	✅ Datastore validated
2022-05-02T01:58:23.279Z	V0	✅ Folder validated
2022-05-02T01:58:23.652Z	V0	✅ Resource pool validated
2022-05-02T01:58:24.016Z	V0	✅ Datastore validated
2022-05-02T01:58:24.388Z	V0	✅ Folder validated
2022-05-02T01:58:24.730Z	V0	✅ Resource pool validated
2022-05-02T01:58:25.061Z	V0	✅ Datastore validated
2022-05-02T01:58:25.396Z	V0	✅ Folder validated
2022-05-02T01:58:25.815Z	V0	✅ Resource pool validated
2022-05-02T01:58:26.167Z	V0	✅ Datastore validated
2022-05-02T01:58:26.560Z	V0	✅ Folder validated
2022-05-02T01:58:26.933Z	V0	✅ Resource pool validated
2022-05-02T01:58:27.787Z	V1	Control plane template validation failed.
2022-05-02T01:58:27.787Z	V0	❌ Validation failed	{"validation": "vsphere Provider setup is valid", "error": "template /SDDC-Datacenter/vm/Templates/bottlerocket-kube-v1-22 is missing tag eksdRelease:kubernetes-1-22-eks-6", "remediation": ""}
2022-05-02T01:58:27.787Z	V0	✅ Validate certificate for registry mirror
2022-05-02T01:58:27.787Z	V0	✅ Create preflight validations pass
2022-05-02T01:58:27.787Z	V4	Task finished	{"task_name": "setup-validate", "duration": "11.606096865s"}
2022-05-02T01:58:27.787Z	V4	----------------------------------
2022-05-02T01:58:27.787Z	V4	Tasks completed	{"duration": "11.606156847s"}
2022-05-02T01:58:27.787Z	V3	Logging out from current govc session
2022-05-02T01:58:28.518Z	V3	Cleaning up long running container	{"name": "eksa_1651456686473964326"}
Error: validations failed
    cluster.go:532: Command eksctl anywhere [create cluster -f main-i-080d248ab9f2e588b-config/cluster.yaml -v 4] failed with error: exit status 255: Error: validations failed
2022-05-02T01:58:28.682Z	V3	e2e	Cleaning up long running container	{"name": "eksa_1651456680297406448"}
2022-05-02T01:58:28.791Z	V3	e2e	Logging out from current govc session
2022-05-02T01:58:29.464Z	V3	e2e	Cleaning up long running container	{"name": "eksa_1651456665913233840"}
--- FAIL: TestVSphereKubernetes122LabelsBottlerocket (43.66s)
FAIL

DONE 1 tests, 1 failure in 43.807s